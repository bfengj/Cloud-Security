[#ftl]
[#-- @ftlvariable name="" type="jetbrains.buildServer.maintenance.StartupPageModel" --]

[#include 'maintenance-stuff.ftl']

[@maintenancePage title='TeamCity Start Failure'  showStageStatus=false]
      <style>
          #nestedPageContent {
              width: 880px;
              background-color: var(--ring-code-background-color);
          }
      </style>

      [@exceptionSection/]

      [#if specificInfo.logFailedDirs??]
        <div class="info-section">
          TeamCity server process does not have enough permissions to write into the log files under the directory:
          <p>
            [#list specificInfo.logFailedDirs as dir]
              <span style="display: block"><tt style="font-weight: bold">${dir.absolutePath}</tt></span>
            [/#list]
          </p>
          Please fix permissions and restart TeamCity. You can read more about TeamCity logs in
          <a href="http://confluence.jetbrains.net/display/TCD18/TeamCity+Server+Logs">documentation</a>.
        </div>
      [/#if]

      [#if ctx.unsupportedJava]
          <p>
              <span class="stage-unrecoverable-error">
              <span id="stageDescription">
                Since TeamCity 10, the minimum supported Java version is 1.8.
                Please upgrade your Java and restart the TeamCity server. [@helpIcon link='Installing+and+Configuring+the+TeamCity+Server#InstallingandConfiguringtheTeamCityServer-JavaInstallation'/]
              </span>
              </span>
          </p>
          <div class="info-section">
              <p>Current Java version: ${ctx.currentJavaVersion}</p>
              <p>Current Java location: ${ctx.currentJavaLocation}</p>
          </div>

      [/#if]

      [#if ctx.unsupportedServerRole]
          <p>
              <span class="stage-unrecoverable-error">
              <span id="stageDescription">
                <b>Running Builds Node is no longer supported.</b>

                The Running Builds Node support is deprecated in favor of extended functionality of the Secondary Node.
                Please, remove the <code>teamcity.server.role</code> parameter from the <a href="https://www.jetbrains.com/help/teamcity/configuring-teamcity-server-startup-properties.html">server startup properties</a> to run this server as a regular <a href="https://www.jetbrains.com/help/teamcity/configuring-secondary-node.html#ConfiguringSecondaryNode-running-builds-node-discontinued">secondary node</a>. To continue processing traffic from agents on this node, enable the "<a href="https://www.jetbrains.com/help/teamcity/configuring-secondary-node.html#ConfiguringSecondaryNode-ProcessingDataProducedbyBuildsonSecondaryNode">Processing data produced by builds</a>" responsibility.

                Note that a secondary node might require as many hardware resources as the main TeamCity server. Refer to <a href="https://www.jetbrains.com/help/teamcity/how-to.html#HowTo...-EstimateHardwareRequirementsforTeamCity">Estimate Hardware Requirements for TeamCity</a> for the notes on recommended hardware.
              </span>
              </span>
          </p>
      [/#if]

[/@maintenancePage]



