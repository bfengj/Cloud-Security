[#ftl]
[#-- @ftlvariable name="" type="jetbrains.buildServer.maintenance.StartupPageModel" --]

[#include 'maintenance-stuff.ftl']

[#macro plural val][#if (val > 1 || val == 0)]s[/#if][/#macro]

[@maintenancePage title='${serverName} Maintenance']
[#if specificInfo.currentStage.name() = 'FIRST_START_SCREEN']
  <script type="text/javascript">
    BS.Maintenance.saveRedirectedFromAndGoToMaintenance();
  </script>
[/#if]
[#if ctx.maintenanceAsked || session.authenticated]
<p class="admin-info">

    TeamCity server requires technical maintenance.
    [#if ctx.countOfAdminsLoggedIn == 0]
      Please let the server administrator know this.[@helpIcon link='TeamCity+Maintenance+Mode'/]
    [#else]
      ${ctx.countOfAdminsLoggedIn} administrator[@plural ctx.countOfAdminsLoggedIn/] already logged in.
    [/#if]

</p>
<div id="admin-welcome-link">
    <a href="#"
       onclick="{BS.Maintenance.saveRedirectedFromAndGoToMaintenance(); return false;}"
    >I'm a server administrator, show me the details</a>
</div>

[/#if]
[/@maintenancePage]