[#ftl]
[#-- @ftlvariable name="" type="jetbrains.buildServer.maintenance.StartupPageModel" --]

[#include 'maintenance-stuff.ftl']

[@maintenancePage title="Choose Node Role" showStageStatus=false]

  <p>
    This node has been started with an explicitly set node ID - <b>${ctx.nodeId}</b>,
    but the shared data directory is not initialized yet.
    To proceed, please choose one of the possible options below:
  </p>
  <div class="actionChoose">
    <input class="inlineBlock" type="radio" name="serverMode" id="startAsMain" checked="checked"/>
    <label class="inlineBlock" for="startAsMain">
      Run this node as <b>main</b> and proceed with the data directory initialization.
    </label>
  </div>
  <div class="actionChoose">
    <input class="inlineBlock" type="radio" name="serverMode" id="startAsSecondary"/>
    <label class="inlineBlock labelWidth95" for="startAsSecondary">
      Run this node as <b>secondary</b>: in this case, it will wait until the data directory is initialized by another node started as main.
    </label>
  </div>
  <div class="action-block">
    <input class="btn btn_primary btn_enable_on_load" type="submit" value="Proceed"
           onclick="BS.Maintenance.postCommandAndRefresh('doNodeTypeConfirmation', {startAsMain: $('#startAsMain').prop('checked')})">
  </div>

  <style type="text/css">
    .actionChoose {
      margin: 5px 0;
    }

    .actionChoose .inlineBlock {
      display: inline-block;
      vertical-align: middle;
    }

    .actionChoose input[type='radio'] {
      width: 5%;
      bottom: 0px;
    }

    .actionChoose label {
      width: 90%;
    }
  </style>

[/@maintenancePage]
